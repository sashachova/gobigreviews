name: .NET Selenium Tests via Docker
 
on:

  push:

    branches: [ "main" ]

  pull_request:

    branches: [ "main" ]
 
jobs:

  run-tests-in-docker:

    runs-on: ubuntu-latest
 
    steps:

      - name: Checkout code

        uses: actions/checkout@v3
 
      - name: Set up Docker Compose

        run: |

          docker-compose build

          docker-compose up --abort-on-container-exit
 
      - name: Upload Allure report as artifact

        if: always()

        uses: actions/upload-artifact@v3

        with:

          name: allure-report

          path: allure-report
 
      - name: Deploy Allure Report to GitHub Pages ðŸš€

        if: always()

        uses: peaceiris/actions-gh-pages@v3

        with:

          github_token: ${{ secrets.GITHUB_TOKEN }}

          publish_dir: ./allure-report

 